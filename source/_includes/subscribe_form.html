<form name="subscribe" action="/sub" method="POST">
    <label for="email">Get notified of new articles via email</label>
    <input id="email" name="email" type="email" placeholder="your@email.com" />
    <button>Subscribe</button>
    <small>No spam, just one email when an article gets publishedâ€”I don't write very often!</small>
</form>
<script>
    var form = document.querySelector('[name="subscribe"]')
    var btn = document.querySelector('[name="subscribe"] > button')
    var input = document.querySelector('#email')

    input.addEventListener('change', function (e) {
        btn.disabled = !form.checkValidity()
    })
    btn.disabled = !form.checkValidity()

    form.addEventListener('submit', function (e) {
        if (!form.checkValidity()) return;
        e.preventDefault()

        if (!('fetch' in window)) {
            form.submit()
        }

        fetch('/sub', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: "email="+encodeURIComponent(e.currentTarget[0].value)
        })

        var title = document.createElement('h1')
        title.innerText = "Thanks!"

        var par = document.createElement('p')
        par.innerText = "You will receive an email when a new article gets published."

        title.style.textAlign = par.style.textAlign = 'center'
        title.style.margin = '5.5rem 0 1.2rem 0'
        par.style.margin = '0 0 7.2rem 0'

        form.insertAdjacentElement('afterend', title)
        title.insertAdjacentElement('afterend', par)
        form.remove()
    })
</script>